<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <title>Consultas</title>

    <!-- Required Stylesheets -->
    <link
      type="text/css"
      rel="stylesheet"
      href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css"
    />

    <!-- Required scripts -->
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/babel-polyfill@latest/dist/polyfill.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
  </head>
  <body>
    <!-- Our application root element -->
    <div id="app">
      <b-container>
        <b-jumbotron header="Registrarse"></b-jumbotron>
		<b-form @submit="onSubmit">
        <b-form-input
          id="input-1"
          v-model="firstName"
          placeholder="Nombre"
          required
        ></b-form-input>
		<b-form-input
          id="input-2"
          v-model="lastName"
          placeholder="Apellido"
          required
        ></b-form-input>
		<b-form-input
          id="input-3"
          v-model="phone"
          placeholder="Telefono"
          required
        ></b-form-input>
        <b-form-input
          id="input-4"
          v-model="email"
          type="email"
          placeholder="Email"
          required
        ></b-form-input>
        <b-form-input
          id="input-5"
          v-model="username"
          placeholder="Username"
          required
        ></b-form-input>
		<b-form-input
          id="input-6"
          v-model="password"
		  type="password"
          placeholder="Password"
          required
        ></b-form-input>

      <b-button type="submit" variant="primary">Submit</b-button>
    </b-form>
    <br>
    <b-button variant="dark" href="index.html">Inicio</b-button>  
      </b-container>
    </div>

    <!-- Start running your app -->
    <script>
      window.app  = new Vue({
        el: '#app',
        data: {
          firstName:'',
		  lastName:'',
		  password:'',
		  phone:'',
		  email: '',
		  username: '',
        },
        methods:{
          onSubmit(event) {
			var self = this
			var json = {
			"firstName":this.firstName,
		    "lastName":this.lastName,
		    "password":this.password,
		    "phone":this.phone,
		    "email":this.email,
		    "username":this.username,
			"userStatus":0,
			"id":0 }
			event.preventDefault()
			var opts = {
						method: 'POST',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body : JSON.stringify(json)
			}
			fetch('/user/', opts)
            .then(function(r){return r.json()})
            .then(function(data){console.log(data)})
            .catch(function(error){console.log(error)})
			alert("Usuario registrado.")
		  }
        }
      })
    </script>
  </body>
</html>